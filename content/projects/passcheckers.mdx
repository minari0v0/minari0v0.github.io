---
title: PassCheckers
startDate: "2025-03"
endDate: "2025-12"
description: AI 이미지 분석 기반 수하물 분류 및 여행 도우미 애플리케이션
tags: ["Vue.js", "Flask", "YOLOv11", "MySQL", "Nginx", "PyTorch", "TensorRT", "Gemini"]
thumbnail: "/images/projects/passcheckers/cover.png"
type: "팀 프로젝트" 
github: https://github.com/minari0v0/PassCheckers
---

## 프로젝트 개요

포스트 코로나 시대 이후 여행 수요가 급증함에 따라 공항 보안 검색대에서 기내 반입 금지 물품을 인지하지 못해 수하물을 포기하는 사례가 빈번해지고 있습니다. 2024년 하반기 기준 약 146톤의 여객 포기 물품이 발생한 문제를 해결하기 위해, YOLOv11x 기반의 딥러닝 객체 탐지 모델을 활용하여 수하물을 자동으로 분류하고 규정을 안내하는 통합 여행 지원 시스템을 개발하였습니다.

## 프로젝트 구조
```
PassCheckers/
├── frontend/                          # Nuxt 3 프론트엔드
│   ├── pages/                         # 서비스 페이지 (분류, 패킹, 무게 예측, 공유 등)
│   ├── components/                    # UI 컴포넌트 (BBox 에디터, 캐러셀, 차트 등)
│   ├── composables/                   # 전역 상태 및 API 로직
│   └── assets/                        # 테마 및 스타일 시트
├── backend/                           # Flask 백엔드 서버
│   ├── models/                        # AI 모델 파일 (SKU, YOLOv11x)
│   ├── routes/                        # RESTful API 엔드포인트
│   ├── services/                      # 외부 API 연동 (Gemini, Weather, Amadeus)
│   ├── matching/                      # 유사도 검증 및 데이터 매칭 로직
│   └── db/                            # 데이터베이스 유틸리티 및 마이그레이션
└── logs/                              # 시스템 로그
```

## 기술 스택 및 아키텍처

#### 기술 스택
| 분류 | 기술 |
|:--------:|:-----:|
| 프론트엔드 | Nuxt 3, Vue 3, TypeScript, Quasar UI |
| 백엔드 | Python 3.10, Flask 3.1 |
| 모델 | YOLOv11x (커스텀 학습) |
| 데이터베이스 | MySQL 8.0, Redis |
| 인프라 | Nginx |
| 기타 | OpenCV, Numpy, Pillow, PyTorch, TensorRT, Gemini API |

#### 시스템 아키텍처
<Mermaid chart={`
graph TB
    A[사용자] --> B[Nuxt 3 프론트엔드]
    B --> C[Flask 백엔드 API]
    C --> D[YOLOv11 모델]
    C --> E[SKU 모델]
    C --> F[MySQL 데이터베이스]
    C --> G[Redis 세션]
    C --> H[날씨 API]
    C --> I[Gemini AI]
    
    D --> J[객체 분류]
    E --> K[바운딩 박스 탐지]
    F --> L[사용자 데이터]
    F --> M[물품 규정]
    F --> N[여행지 정보]
    G --> O[인증 토큰]
    H --> P[실시간 예보]
    I --> Q[패킹 추천]
`} />

## 담당 구현 영역

#### 1. 지능형 수하물 분류 및 보정 에디터
- SKU 및 YOLOv11x 이중 파이프라인을 통한 정밀 객체 탐지 및 분류
- 탐지 결과 시각화 및 사용자 직접 바운딩 박스 수정/추가/삭제 기능
- 유사도 검증 기반의 표준 물품명 추천 및 자동완성 시스템
- 분석 결과를 여행지별로 네이밍하여 고유 기록으로 저장 및 관리

#### 2. 인터랙티브 수하물 패킹 가이드
- 드래그 앤 드롭 인터페이스를 통한 기내/위탁 수하물 가상 패킹 시뮬레이션
- 실시간 정책 엔진 기반의 반입 금지 물품 드롭 차단 및 경고 알림
- 조건부 반입 물품에 대한 상세 가이드와 지연 호버 정보 팝업
- 현재 패킹 현황을 상시 확인할 수 있는 플로팅 요약 윈도우

#### 3. 하이브리드 수하물 무게 예측 및 시각화
- 객체 면적 비율과 표준 무게 데이터를 결합한 수치적 무게 추정 알고리즘
- DB 미등록 물품 추가 시 Gemini API를 활용한 실시간 정보 보강
- 카테고리별 무게 분포 시각화 및 적정 캐리어 사이즈 추천 서비스

#### 4. 실시간 동반자 수하물 정보 공유
- 고유 공유 코드를 활용한 동반 여행자 간 분석 기록 세션 연결
- 캐러셀 UI를 통한 동반자별 수하물 데이터 직관적 교차 조회
- 참여자 간 실시간 채팅 기능을 통한 준비물 중복 방지 및 소통 지원
- 호스트 권한 기반의 멤버 관리 및 연결 해제 기능

## 핵심 기술

#### 1. 객체 탐지 성능 극대화를 위한 2-Stage 파이프라인
수하물 이미지는 작은 물체들이 밀집된 특성이 있어 단일 탐지 모델로는 오탐율이 높습니다. 이를 해결하기 위해 물체 위치 탐지에 특화된 SKU 모델로 1차 스캔을 수행하고, 탐지된 영역만을 Crop하여 YOLOv11x 모델로 정밀 분류하는 2단계 구조를 설계했습니다. 이 과정에서 44개 클래스의 커스텀 데이터셋을 직접 구축하여 분류 성능을 확보했습니다.

#### 2. TensorRT 가속화를 통한 하이브리드 추론 최적화
무거운 YOLOv11x 모델을 실시간으로 운용하기 위해 모델 가속화를 진행했습니다. SKU 모델은 TensorRT 변환 후 속도가 5.83배 향상되었으나, YOLOv11x는 mAP가 10.7% 하락하는 손실이 발견되었습니다. 분석 신뢰도를 위해 SKU(TensorRT)와 YOLO(PyTorch)를 조합한 하이브리드 전략을 채택하여, 전체 속도를 1.35배 개선하면서도 정확도를 유지했습니다.

#### 3. 하이브리드 알고리즘을 통한 무게 예측의 신뢰성 확보
사진만으로 무게를 추정할 때 발생하는 불확실성을 최소화하기 위해 통계 데이터와 생성형 AI를 결합했습니다. 직접 구축한 `weights` 테이블을 1순위로 참조하고, 이미지 내 면적 비율에 따른 가중치를 적용합니다. DB 미등록 물품은 Gemini API를 활용하되 산출된 값을 정의된 범위 내로 제한하여 환각 현상을 방지했습니다.
```python
# backend/services/gemini_predict.py (무게 보정 로직)
def _calculate_weight(avg_weight_value, weight_range, bbox_ratio):
    # 면적 비율에 따라 가중치 계수 산출 (0.75 ~ 1.2)
    weight_multiplier = calculate_multiplier(bbox_ratio)
    
    # 기본 평균값에 가중치 적용 후 정의된 Min-Max 범위 내로 클리핑
    predicted_weight = base_avg_weight_g * weight_multiplier
    return max(min_weight_g, min(predicted_weight, max_weight_g))
```

#### 4. 공유 코드 기반의 실시간 협업 세션 관리
서로 다른 사용자의 분석 결과를 하나의 세션으로 연결하기 위해 공유 코드 시스템을 구축했습니다. 고유 코드를 통한 관계 테이블 매핑으로 동반자의 짐 목록을 실시간으로 조회하고 조율할 수 있는 채널을 제공합니다.
```python
# backend/routes/share.py (동반자 연결 세션 조회)
@share_bp.route("/api/share/connections/<share_code>", methods=["GET"])
def get_all_connections(share_code):
    # 1. 공유 코드로 현재 사용자의 세션 ID 식별
    viewer_id = find_analysis_id_by_code(share_code)
    # 2. 연결 테이블에서 호스트/파트너 관계를 추적하여 모든 참여자 ID 수집
    participant_ids = collect_all_related_participants(viewer_id)
    # 3. 참여자의 상세 분석 데이터 및 물품 리스트 통합 반환
    return jsonify({"partners": fetch_detailed_partner_data(participant_ids)})
```

#### 5. 효율적인 데이터베이스 설계와 협업 환경 구축
졸업 프로젝트 특성상 잦은 스키마 변경을 관리하기 위해 서버 구동 시 데이터베이스를 자동으로 검사하고 마이그레이션하는 로직을 백엔드 진입점에 통합했습니다. 이를 통해 팀원들이 별도의 SQL 실행 없이 최신 개발 환경을 즉시 유지할 수 있도록 지원했습니다.

## 프로젝트 성과

#### 기술적 성장
- **풀스택 AI 서비스 구축**: 모델 전처리부터 가속화, 웹 서비스 프론트/백엔드 전체 사이클 경험
- **RESTful API 설계 능력**: Flask를 활용한 30개 이상의 엔드포인트 모듈화 및 효율적인 통신 구조 설계
- **인터랙티브 UI 구현**: Nuxt 3와 다양한 라이브러리를 활용한 복잡한 분석 데이터의 직관적 시각화

#### 문제 해결 경험
- **정밀한 좌표 정규화 로직 구현**: 캔버스 에디터의 수정 좌표를 원본 해상도에 맞춰 정규화하고 재렌더링하는 과정의 오차 해결
- **유사도 기반 데이터 매칭**: 오타 입력 시에도 `RapidFuzz`를 통해 표준 물품명과 매칭시켜 데이터 정합성 확보
- **추론 성능 최적 지점 도출**: 정확도와 속도 사이의 트레이드오프 분석을 통한 하이브리드 추론 모델 도입

## 개선할 부분

현재 시스템은 단일 이미지 분석에 집중되어 있으나, 향후 실시간 영상 스트리밍 분석 기능을 추가하여 짐을 싸는 과정 자체를 실시간 모니터링하는 가이드 시스템으로 확장하고 싶습니다. 또한 TensorRT 최적화 시 발생하는 정확도 하락을 줄이기 위해 더 정교한 양자화 알고리즘 연구를 병행할 계획입니다.

## 프로젝트 회고

PassCheckers 프로젝트는 웹 개발의 각 계층을 이해하고, 실제 사용자의 페인 포인트를 AI 기술로 해결하는 과정에서 개발자로서 시야를 넓혀준 소중한 경험이었습니다. 특히 단순히 모델을 돌리는 것을 넘어 "사용자가 이 결과를 어떻게 받아들이고 활용할까?"를 고민하며 에디터와 공유 세션을 구현한 점이 큰 성과였습니다. 기술적으로 최신 모델과 가속화 도구, 생성형 AI를 적재적소에 융합하여 실용적인 서비스를 완성한 점에 큰 보람을 느낍니다.